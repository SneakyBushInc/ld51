; === Common ===

[Player@Character]
ClassList       = Warrior # Ranger # Paladin # Cleric # Rogue
NextClass       = @.ClassList
OnPrepare       = "> Object.GetName ^, >> Get < NextClass, > Object.GetName ^, > Config.SetParent < <, Set < Class <,
                   > Object.GetName ^, > Get < ClassList, > Object.GetName ^, Set < NextClass <"

Group           = player
Pivot           = bottom truncate

ChildList       = % >> @, > Get < NextClass, > return "<Icon", Set < ShaderList <, > @, > Get < NextClass, return "<Icon"

-JOY_LX         = MoveLeft
+JOY_LX         = MoveRight
-JOY_LY         = MoveUp
+JOY_LY         = MoveDown
JOY_LEFT        = MoveLeft
JOY_RIGHT       = MoveRight
JOY_UP          = MoveUp
JOY_DOWN        = MoveDown

ShaderList      = @
ParamList       = HueShift # Texture
Code            = "
vec3 rgb2hsl(vec3 c)
{
  vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
  vec4 p = c.g < c.b ? vec4(c.bg, K.ab) : vec4(c.gb, K.rg);
  vec4 q = c.r < p.r ? vec4(p.rga, c.r) : vec4(c.r, p.gbr);
  float col = q.r - min(q.a, q.g);
  vec3 hcv = vec3(abs((q.a - q.g) / (6.0 * col + 1e-10) + q.b), col, q.r);
  float L = hcv.b - hcv.g * 0.5;
  return vec3(hcv.r, min(hcv.g / (1.0 - abs(L * 2.0 - 1.0) + 1e-10), 1.0), L);
}

vec3 hsl2rgb(vec3 c)
{
  vec3 rgb = clamp(vec3(abs(c.r * 6.0 - 3.0) - 1.0, 2.0 - abs(c.r * 6.0 - 2.0), 2.0 - abs(c.r * 6.0 - 4.0)), vec3(0.0), vec3(1.0));
  return (rgb - vec3(0.5)) * vec3((1.0 - abs(2.0 * c.z - 1.0)) * c.y) + c.b;
}

void main()
{
  vec4 color    = texture2D(Texture, gl_TexCoord[0].xy);
  vec3 hsl      = rgb2hsl(color.rgb);
  hsl.x         = mod(hsl.x + HueShift, 1.0);
  vec3 rgb      = hsl2rgb(hsl);
  gl_FragColor  = vec4(rgb, color.a);
}
"


; === Classes ===

[Warrior@Player]
Texture         = player/warrior.png
TextureSize     = (32, 32)
TextureOrigin   = (0, 64)

[Icon]
Graphic         = @
TextureSize     = (32, 32)
TextureOrigin   = (0, 64)
Scale           = 0.5
Position        = bottom -> top

[WarriorIcon@Icon]
Texture         = @Warrior

[Ranger@Player]
AnimationSet    =
Graphic         = @
Text            = @
String          = RANGER

[RangerIcon@Icon]
Texture         = @Ranger
Graphic         = Ranger

[Paladin@Player]
AnimationSet    =
Graphic         = @
Text            = @
String          = PALADIN

[PaladinIcon@Icon]
Texture         = @Paladin
Graphic         = Paladin

[Cleric@Player]
AnimationSet    =
Graphic         = @
Text            = @
String          = CLERIC

[ClericIcon@Icon]
Texture         = @Cleric
Graphic         = Cleric

[Rogue@Player]
AnimationSet    =
Graphic         = @
Text            = @
String          = ROGUE

[RogueIcon@Icon]
Texture         = @Rogue
Graphic         = Rogue


; === Player 1 ===

[Player1@Player]

Position        = (-100, -100)

JoyIDList       = 1
KEY_W           = MoveUp
KEY_A           = MoveLeft
KEY_S           = MoveDown
KEY_D           = MoveRight
ShaderList      =


; === Player 2 ===

[Player2@Player]
Position        = (100, -100)
HueShift        = 0.35

JoyIDList       = 2
KEY_UP          = MoveUp
KEY_LEFT        = MoveLeft
KEY_DOWN        = MoveDown
KEY_RIGHT       = MoveRight


; === Player 3 ===

[Player3@Player]
Position        = (-100, 100)
HueShift        = 0.57

JoyIDList       = 3

; === Player 4 ===

[Player4@Player]
Position        = (100, 100)
HueShift        = 0.7

JoyIDList       = 4
